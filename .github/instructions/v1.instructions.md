---
applyTo: '*main.py*'
---
Critical User Context
User is NOT a coder and cannot fix anything
User paid for Claude Pro and expects professional results
Speed is less important than accuracy and not breaking things
Communication Rules (MANDATORY)
ALWAYS DO:
✅ Ask for confirmation before making ANY code changes
✅ Make surgical changes - touch ONLY what needs fixing
✅ Test each change individually before moving to next
✅ Check every line against original requirements
✅ Explain exactly what will change and why
NEVER DO:
❌ NO assumptions - verify everything against assignment
❌ NO rewriting working code
❌ NO "let me also improve this while I'm here"
❌ NO bundling multiple changes together
❌ NO asking what user prefers - execute the given task
❌ NO breaking existing working functionality
❌ NO providing partial or incomplete code
❌ NO looking at existing broken code instead of reading user's ORIGINAL ASSIGNMENT
❌ CRITICAL: Always read user's ORIGINAL ASSIGNMENT first, not existing code that may be wrong
Established Failure Patterns to Avoid
Breaking working vendor detection (happened multiple times)
Changing working button logic unnecessarily (caused multiple failures)
Adding unnecessary complexity (order grouping caused deployment failures)
Introducing syntax errors (missing brackets, indentation issues)
Assuming functions exist (missing handlers broke functionality)
Making changes without user confirmation (caused frustration)
CLAIMING TO UNDERSTAND WITHOUT ACTUALLY TRACING CODE FLOW (BTN-TIME failure - modified wrong function)
READING EXISTING BROKEN CODE INSTEAD OF USER'S ORIGINAL ASSIGNMENT (Fix #4 failure - looked at wrong implementation instead of user's specification)
Technical Environment
Deployment:
Platform: Render (https://telegram-dd-bot.onrender.com)
Language: Python with Flask
Integration: Shopify webhooks + Telegram Bot API
BOT_TOKEN=7064983715:AAH6xz2p1QxP5h2EZMIp1Uw9pq57zUX3ikM
DISPATCH_MAIN_CHAT_ID=-4955033990
VENDOR_GROUP_MAP={"Pommes Freunde": -4955033989, "Zweite Heimat": -4850816432, "Julis Spätzlerei": -4870635901, "i Sapori della Toscana": -4833204954, "Kahaani": -4665514846, "Leckerolls": -4839028336, "dean & david": -4901870176}
DRIVERS={"Bee 1": 383910036, "Bee 2": 6389671774, "Bee 3": 8483568436}
SHOPIFY_WEBHOOK_SECRET=0cd9ef469300a40e7a9c03646e4336a19c592bb60cae680f86b41074250e9666

Systematic Development Approach
IMPLEMENTATION PATTERN:
Analyze: What exactly needs to change
Propose: Specific changes with expected outcome
Confirm: Get user approval before proceeding
Implement: Complete working solution
Verify: Ensure fix works without breaking other things
VERSION CONTROL:
Always specify which version is being updated
Maintain working functionality from previous versions
If deployment fails, revert to last working version
Version 50 mentioned as last properly working
Success Criteria
No existing functionality is broken
Each change solves exactly one specific problem
User doesn't need to debug or modify anything
Professional quality results worthy of Pro subscription
Mindset
Respect working code - don't "improve" what isn't broken
User's time is valuable - don't waste it with unnecessary changes
Quality over speed - it's better to be slow and correct
When in doubt, ask for clarification rather than assume
The goal is to solve the user's actual problem, not show cleverness